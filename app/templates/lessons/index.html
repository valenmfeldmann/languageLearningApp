{% extends "base.html" %}
{% block title %}Lessons{% endblock %}

{% block content %}
  <h1>Lessons</h1>

  <form class="lessons-filters" method="GET" action="{{ url_for('main.lessons_index') }}" style="margin: 12px 0;">
    <input type="text" name="q" value="{{ q or '' }}" placeholder="Searchâ€¦" style="width: 320px; max-width: 100%;">
    <select name="scope" style="margin-left: 6px;">
      <option value="mine" {% if scope == "mine" %}selected{% endif %}>Mine</option>
      <option value="public" {% if scope == "public" %}selected{% endif %}>Public</option>
      <option value="all" {% if scope == "all" %}selected{% endif %}>Mine + Public</option>
    </select>
    <button type="submit" style="margin-left: 6px;">Go</button>
  </form>

  {% if lessons and lessons|length > 0 %}
    <ul>
      {% for L in lessons %}
        <li style="margin: 10px 0;">
          <a href="{{ url_for('main.lesson_page', lesson_code=L.code, src='lessons_index', q=q, scope=scope) }}">

          <span style="opacity:0.65; font-size: 12px; margin-left: 6px;">({{ L.code }})</span>
          {% if L.visibility %}
            <span style="opacity:0.65; font-size: 12px; margin-left: 6px;">{{ L.visibility }}</span>
          {% endif %}
          {% if L.description %}
            <div style="opacity:0.8; margin-top:4px;">{{ L.description }}</div>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p style="opacity:0.8; font-style: italic;">No lessons found.</p>
  {% endif %}
{% endblock %}
